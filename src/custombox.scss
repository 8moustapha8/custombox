// Constans
$cb: custombox;
$overlay: #{$cb}-overlay;
$content: #{$cb}-content;
$container: #{$cb}-container;

// Actions
$open: #{$cb}-open;
$close: #{$cb}-close;
$t: #{$cb}-top;
$b: #{$cb}-bottom;
$l: #{$cb}-left;
$r: #{$cb}-right;

// Cartesian
$x-left: #{$cb}-x-left;
$x-center: #{$cb}-x-center;
$x-right: #{$cb}-x-right;
$y-top: #{$cb}-y-top;
$y-center: #{$cb}-y-center;
$y-bottom: #{$cb}-y-bottom;

// Effects
$effect1: #{$cb}-fadein;
$effect2: #{$cb}-slide;
$effect3: #{$cb}-newspaper;
$effect4: #{$cb}-fall;
$effect5: #{$cb}-sidefall;
$effect6: #{$cb}-blur;

@mixin animation($name, $timing: ease-out, $fill-mode: forwards) {
  animation-name: $name;
  animation-timing-function: $timing;
  animation-fill-mode: $fill-mode;
  backface-visibility: hidden;
}

/*
 ----------------------------
 Core
 ----------------------------
 */

@mixin fixed() {
  position: fixed;
  overflow: hidden;
  top: 0;
  width: 100%;
  height: 100%;
}

.#{$cb},
.#{$content},
.#{$overlay} {
  @include fixed();
}
.#{$cb} {
  z-index: 9999;
}
.#{$overlay} {
  opacity: 0;
  transition-delay: 0s;
  transition-timing-function: linear;
  transition-property: opacity;
}
.#{$content} {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  align-items: center;
  align-content: stretch;
  pointer-events: none;
}
.#{$content} {
  > * {
    max-width: 100%;
  }
}
.#{$cb}-fullscreen.#{$content} {
  justify-content: flex-start;
  align-items: stretch;
  > * {
    width: 100%;
  }
}
.#{$y-top} {
  align-items: baseline;
}
.#{$x-left} {
  align-items: flex-start;
}
.#{$y-center} {
  align-items: center;
}
.#{$y-bottom} {
  align-items: flex-end;
}
.#{$x-center} {
  justify-content: center;
}
.#{$x-right} {
  justify-content: flex-end;
}

/*
 ----------------------------
 #{$effect1}
 ----------------------------
 */
@mixin fadeOpen() {
  transform: scale(0.7);
  transition-property: all;
}

@mixin fadeClose() {
  transform: scale(1);
  opacity: 1;
}

@keyframes fadeIn {
  from {
    @include fadeOpen();
  }
  to {
    @include fadeClose();
  }
}
@keyframes fadeOut {
  from {
    @include fadeClose();
  }
  to {
    @include fadeOpen();
  }
}
.#{$effect1} {
  .#{$content} {
    opacity: 0;

    &.#{$open} {
      @include animation(fadeIn, ease-in);
    }
    &.#{$close} {
      @include animation(fadeOut, ease-out);
    }
  }
}

/*
 ----------------------------
 #{$effect2}
 ----------------------------
 */
@keyframes slideInTop {
  from {
    transform: translateY(-100%);
  }
  to {
    transform: translateY(0);
  }
}
@keyframes slideOutTop {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(-100%);
  }
}
@keyframes slideInBottom {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}
@keyframes slideOutBottom {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(100%);
  }
}
@keyframes slideInLeft {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}
@keyframes slideOutLeft {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-100%);
  }
}
@keyframes slideInRight {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}
@keyframes slideOutRight {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(100%);
  }
}
.#{$effect2} {
  .#{$content} {
    transform: translateX(-100%);

    &.#{$open}.#{$t} {
      @include animation(slideInTop, ease-out);
    }
    &.#{$open}.#{$b} {
      @include animation(slideInBottom, ease-out);
    }
    &.#{$open}.#{$l} {
      @include animation(slideInLeft, ease-out);
    }
    &.#{$open}.#{$r} {
      @include animation(slideInRight, ease-out);
    }
    &.#{$close}.#{$t} {
      @include animation(slideOutTop, ease-in);
    }
    &.#{$close}.#{$b} {
      @include animation(slideOutBottom, ease-in);
    }
    &.#{$close}.#{$l} {
      @include animation(slideOutLeft, ease-in);
    }
    &.#{$close}.#{$r} {
      @include animation(slideOutRight, ease-in);
    }
  }
}

/*
 ----------------------------
 #{$effect3}
 ----------------------------
 */
@mixin newspaperOpen() {
  transform: scale(0) rotate(720deg);
  opacity: 0;
}

@mixin newspaperClose() {
  transform: scale(1) rotate(0deg);
  opacity: 1;
}

@keyframes newspaperIn {
  from {
    @include newspaperOpen();
  }
  to {
    @include newspaperClose();
  }
}
@keyframes newspaperOut {
  from {
    @include newspaperClose();
  }
  to {
    @include newspaperOpen();
  }
}
.#{$effect3} {
  .#{$content} {
    opacity: 0;

    &.#{$open} {
      @include animation(newspaperIn, ease-in);
    }
    &.#{$close} {
      @include animation(newspaperOut, ease-out);
    }
  }
}

/*
 ----------------------------
 #{$effect4}
 ----------------------------
 */
@mixin fallOpen() {
  transform-style: preserve-3d;
  transform: translateZ(600px) rotateX(20deg);
  opacity: 0;
}

@mixin fallClose() {
  transition-timing-function: ease-in;
  transition-property: all;
  transform: translateZ(0) rotateX(0deg);
  opacity: 1;
}

@keyframes fallIn {
  from {
    @include fallOpen();
  }
  to {
    @include fallClose();
  }
}
@keyframes fallOut {
  from {
    @include fallClose();
  }
  to {
    @include fallOpen();
  }
}
.#{$effect4} {
  perspective: 1300px;

  .#{$content} {
    opacity: 0;

    &.#{$open} {
      @include animation(fallIn, ease-in);
    }
    &.#{$close} {
      @include animation(fallOut, ease-out);
    }
  }
}

/*
 ----------------------------
 #{$effect5}
 ----------------------------
 */
@mixin sidefallOpen() {
  transform-style: preserve-3d;
  transform: translate(30%) translateZ(600px) rotate(10deg);
  opacity: 0;
}

@mixin sidefallClose() {
  transition-timing-function: ease-in;
  transition-property: all;
  transform: translate(0) translateZ(0) rotate(0deg);
  opacity: 1;
}

@keyframes sidefallIn {
  from {
    @include sidefallOpen();
  }
  to {
    @include sidefallClose();
  }
}
@keyframes sidefallOut {
  from {
    @include sidefallClose();
  }
  to {
    @include sidefallOpen();
  }
}
.#{$effect5} {
  perspective: 1300px;

  .#{$content} {
    opacity: 0;

    &.#{$open} {
      @include animation(sidefallIn, ease-in);
    }
    &.#{$close} {
      @include animation(sidefallOut, ease-out);
    }
  }
}

/*
 ----------------------------
 #{$effect6}
 ----------------------------
 */
@mixin blurOpen() {
  transform: translateY(-5%);
  opacity: 0;
}
@mixin blurOpenBottom() {
  transform: translateY(5%);
  opacity: 0;
}
@mixin blurOpenRight() {
  transform: translateX(5%);
  opacity: 0;
}
@mixin blurOpenLeft() {
  transform: translateX(-5%);
  opacity: 0;
}
@mixin blurClose() {
  transform: translateY(0);
  opacity: 1;
}
@mixin blurContainerOpen() {
  filter: blur(0px);
}
@mixin blurContainerClose() {
  filter: blur(3px);
}

@keyframes blurInTop {
  from {
    @include blurOpen();
  }
  to {
    @include blurClose();
  }
}
@keyframes blurOutTop {
  from {
    @include blurClose();
  }
  to {
    @include blurOpen();
  }
}
@keyframes blurInBottom {
  from {
    @include blurOpenBottom();
  }
  to {
    @include blurClose();
  }
}
@keyframes blurOutBottom {
  from {
    @include blurClose();
  }
  to {
    @include blurOpenBottom();
  }
}
@keyframes blurInRight {
  from {
    @include blurOpenRight();
  }
  to {
    @include blurClose();
  }
}
@keyframes blurOutRight {
  from {
    @include blurClose();
  }
  to {
    @include blurOpenRight();
  }
}
@keyframes blurInLeft {
  from {
    @include blurOpenLeft();
  }
  to {
    @include blurClose();
  }
}
@keyframes blurOutLeft {
  from {
    @include blurClose();
  }
  to {
    @include blurOpenLeft();
  }
}
@keyframes blurInContainer {
  from {
    @include blurContainerOpen();
  }
  to {
    @include blurContainerClose();
  }
}
@keyframes blurOutContainer {
  from {
    @include blurContainerClose();
  }
  to {
    @include blurContainerOpen();
  }
}
.#{$effect6} {
  .#{$content} {
    opacity: 0;

    &.#{$open}.#{$t} {
      @include animation(blurInTop, ease-in);
    }
    &.#{$close}.#{$t} {
      @include animation(blurOutTop, ease-out);
    }
    &.#{$open}.#{$b} {
      @include animation(blurInBottom, ease-in);
    }
    &.#{$close}.#{$b} {
      @include animation(blurOutBottom, ease-out);
    }
    &.#{$open}.#{$r} {
      @include animation(blurInRight, ease-in);
    }
    &.#{$close}.#{$r} {
      @include animation(blurOutRight, ease-out);
    }
    &.#{$open}.#{$l} {
      @include animation(blurInLeft, ease-in);
    }
    &.#{$close}.#{$l} {
      @include animation(blurOutLeft, ease-out);
    }
  }
}
.#{$effect6}.#{$container} {
  @include animation(blurOutContainer, ease-out);
}
.#{$effect6}.#{$container}.#{$open} {
  @include animation(blurInContainer, ease-in);
}